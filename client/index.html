<!doctype html>
<html>
<head>
    <title>Engine Control User Interface</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://www.amcharts.com/lib/4/core.js"></script>
    <script src="https://www.amcharts.com/lib/4/charts.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/material.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

    <!--    <link href="css/styles.css" rel="stylesheet">-->
    <link href="css/slider.css" rel="stylesheet"></link>
    <link href="css/styles.css" rel="stylesheet"></link>
</head>
<div id="templates" hidden>
    <div class="card">
        <div class="card-header" id="headingTemp">
            <h2 class="mb-0">
                <div class="form-check">
                    <input class="form-check-input ckbx" type="checkbox" onclick="onChecklistTick(this);" value=""
                           id="checklistCheckTemp">
                    <button class="form-check-label btn btn-link collapsed" for="checklistCheckTemp" type="button"
                            data-toggle="collapse" data-target="#collapseTemp" aria-expanded="false"
                            aria-controls="collapseTemp">

                    </button>
                </div>
                <!--            <div class="form-control-lg custom-control custom-checkbox checklist-header-container">-->
                <!--                <input class="custom-control-input " type="checkbox" onclick="onChecklistTick(this);" id="checklistCheckTemp">-->
                <!--                <button class="custom-control-label btn btn-link collapsed ckbx-label" for="checklistCheckTemp" type="button" data-toggle="collapse" data-target="#collapseTemp" aria-expanded="false" aria-controls="collapseTemp">-->
                <!--                </button>-->
                <!--            </div>-->
            </h2>
        </div>
        <div id="collapseTemp" class="collapse" aria-labelledby="headingTemp">
            <div class="card-body">
            </div>
        </div>

    </div>
    <div id="tempChart" class="sensorChart" hidden></div>
    <div id="tempRow" class="row control-row"></div>
    <div id="tempServo" class="range-slider col">
        <label class="range-slider-label input-label">Temp Servo</label><br>
        <input class="range-slider__range servo-slider manual-obj" id="tempServoSlider" idNum="0"
               oninput="onServoSliderInput($(this));" type="range" value="0" min="0" max="100" step="1"
               disabled>
        <span class="range-slider__value" disabled>0</span>

    </div>
    <div class="form-control-lg custom-control custom-checkbox digitalOut-div">
        <input type="checkbox" class="custom-control-input ckbx manual-obj digitalOut" id="tempDigitalOut"
               onclick="onDigitalCheck(this);" disabled>
        <label class="custom-control-label ckbx-label" for="tempDigitalOut">Temp Digital Out</label>
    </div>
    <div id="tempMotor" class="btn-group btn-group-toggle" data-toggle="buttons">
      <label class="btn btn-secondary btn-radio active">
        <input type="radio" name="options" id="option1" checked> Active
      </label>
      <label class="btn btn-secondary btn-radio">
        <input type="radio" name="options" id="option2"> Radio
      </label>
      <label class="btn btn-secondary btn-radio">
        <input type="radio" name="options" id="option3"> Radio
      </label>
    </div>

</div>


<div id="titleBar">
    <img id="icon" src="icon.png" alt="ST Logo" style="width:8rem;">
    <p id="title">ECUI</p>
    <p id="subtitle">Engine Control User Interface</p>
    <p id="versionLabel">v<span id="version">1.0.0</span></p>
</div>

<ul class="nav nav-pills justify-content-center" id="myTab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active tab-button" id="monitor-tab-button" data-toggle="tab" href="#sequence-tab" role="tab"
           aria-controls="sequence-tab" aria-selected="true">Monitor</a>
    </li>
    <li class="nav-item">
        <a class="nav-link tab-button" id="control-tab-button" data-toggle="tab" href="#control-tab" role="tab"
           aria-controls="control-tab" aria-selected="false">Control</a>
    </li>
    <li class="nav-item">
        <a class="nav-link tab-button" id="calibration-tab-button" data-toggle="tab" href="#calibration-tab" role="tab"
           aria-controls="calibration-tab" aria-selected="false">Calibrate</a>
    </li>
</ul>
<hr>
<div id="statusBar"></div>
<div class="tab-content" id="myTabContent">

    <div class="tab-pane fade show active" id="sequence-tab" role="tabpanel" aria-labelledby="monitor-tab-button">
        <div class="container-fluid sequence-fluid">
            <div class="row header">
                <div class="col col-3">
                    <h1 id="timer">0.0</h1>
                </div>
                <div class="col col-2">
                  <select class="btn btn-secondary ecui-select" id="sequenceSelect" onchange="onSequenceSelectChange(value);">
                  </select>
                </div>
                <div class="col">
                    <button class="btn btn-secondary" id="toggleSequenceButton" disabled="true">Start Sequence</button>
                </div>
            </div>
            <div class="row content">
                <div class="col">
                    <div id="sequenceChart"></div>
                </div>
                <div class="col col-4" id="checklistCol">
                    <div id="commentDiv">
                        <label for="commentTextbox">Comments:</label><br>
                        <textarea id="commentTextbox" rows="6">
Ox Pressure Tank: 150 bar
Fuel Pressure Tank: 195 bar
Ox Pressure Inlet: 40 bar
Fuel Pressure Inlet: 18 bar

Notes: Hotfire
                        </textarea>
                    </div>
                    <div class="accordion" id="checklist">

                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="control-tab" role="tabpanel" aria-labelledby="control-tab-button">
        <div id="servo-container" class="container-fluid">
            <div class="form-control-lg custom-control custom-checkbox servo-enable-container row control-row">
                <input type="checkbox" class="custom-control-input ckbx" id="servoEnableCheck"
                       onclick="onServoEnable(this);">
                <label class="custom-control-label ckbx-label" for="servoEnableCheck">Enable Manual Control</label>
            </div>
            
            <div class="row control-row">
                <div class="range-slider col">
                    <label class="range-slider-label input-label">Oxidizer Vent Valve</label><br>
                    <input class="range-slider__range servo-slider manual-obj" id="oxVentValve" idNum="1"
                           oninput="onServoSliderInput($(this));" type="range" value="0" min="0" max="100" step="1"
                           disabled>
                    <span class="range-slider__value" disabled>0</span>
                </div>

            </div>
            <div class="row control-row" style="margin-left: 0rem;">
                <div class="form-control-lg custom-control custom-checkbox digitalOut-div">
                    <input type="checkbox" class="custom-control-input ckbx manual-obj digitalOut" id="igniter"
                           onclick="onDigitalCheck(this);" disabled>
                    <label class="custom-control-label ckbx-label" for="igniter">Igniter</label>
                </div>
                <div class="form-control-lg custom-control custom-checkbox digitalOut-div">
                    <input type="checkbox" class="custom-control-input ckbx manual-obj digitalOut" id="fuelPressSolenoid;fuelDepressSolenoid"
                           onclick="onDigitalCheck(this,0.5);" disabled>
                    <label class="custom-control-label ckbx-label" for="fuelPressSolenoid;fuelDepressSolenoid">Pressurize Fuel</label>
                </div>
                <div class="form-control-lg custom-control custom-checkbox digitalOut-div">
                    <input type="checkbox" class="custom-control-input ckbx manual-obj digitalOut" id="oxPressSolenoid;oxDepressSolenoid"
                           onclick="onDigitalCheck(this,0.5);" disabled>
                    <label class="custom-control-label ckbx-label" for="oxPressSolenoid;oxDepressSolenoid">Pressurize Oxidizer</label>
                </div>
            </div>

            <button class="btn btn-secondary cal-btn manual-obj" id="saftlButton" disabled>Saftl</button>
        </div>

    </div>
    <div class="tab-pane fade" id="calibration-tab" role="tabpanel" aria-labelledby="calibration-tab-button">
        <div id="calibration-container" class="container-fluid">
            <div class="form-control-lg custom-control custom-checkbox servo-enable-container row control-row">
                <input type="checkbox" class="custom-control-input ckbx" id="servoEnableCheck1"
                       onclick="onServoEnable(this);">
                <label class="custom-control-label ckbx-label" for="servoEnableCheck1">Enable Manual Control</label>
            </div>

            <div class="row control-row">

                <div class="col col-3 spinner">
                    <label class="input-label" for="oxVentValveCal">
                        <div class="container-fluid calLabel-container">
                            <div class="row">
                                <div id="oxVentValveMinLabel" class="col col-3 minLabel">800</div>
                                <div id="oxVentValveLabel" class="col centerLabel">Oxidizer Vent Valve</div>
                                <div id="oxVentValveMaxLabel" class="col col-3 maxLabel">2200</div>
                            </div>
                        </div>
                    </label>
                    <input id="oxVentValveCal" class="manual-obj" type="number" value="1500" data-decimals="0" min="800" max="2200"
                           step="1" onchange="onServoSpinnerChange($(this));" disabled/>
                </div>
                <div class="col col-5">
                    <button class="btn btn-secondary cal-btn manual-obj" id="oxVentValveMin"
                            onclick="onCalibrateMin($(this));" disabled>Set Close
                    </button>
                    <button class="btn btn-secondary cal-btn manual-obj" id="oxVentValveMax"
                            onclick="onCalibrateMax($(this));" disabled>Set Open
                    </button>
                </div>
            </div>

        </div>

    </div>

</div>
</div>
<div id="sensorChartDiv">
    <button class="btn btn-secondary" id="resetButton" style="margin-left: 2rem; margin-top: -2rem;">Reset Sensor Charts</button><br>
</div>


<script src="/socket.io/socket.io.js"></script>
<script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
<script
        src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
        integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30="
        crossorigin="anonymous"></script>

<script>
    $("#version").load( "version.txt", function() {

    });
</script>

<script src="lib/bootstrap-input-spinner.js"></script>
<script src="js/Slider.js"></script>
<script src="js/SequenceChart.js"></script>
<script src="js/SensorChart.js"></script>
<script src="./js/ClientSocket.js"></script>
<script src="./lib/responsivevoice.js?key=1KDoRqPO"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>
</html>
